---
layout: post
title:  "vim 编辑器学习笔记"
subtitle: "vim 的使用"
date:   2019-01-27
background: '/img/imac_bg.png'
---
前言：vim 的重要性不必多讲，之前没有系统的学过，只知道vi强大，使用vi也是像只用windows下没有鼠标的记事本一样。。。。额，这个形容太贴切了，哈哈。今天系统学习一下，这里做一些记录，不记录就忘记了。。。

参考 [《鸟哥Linux私房菜》]([http://cn.linux.vbird.org/linux_basic/0310vi_2.php](http://cn.linux.vbird.org/linux_basic/0310vi_2.php)
) & 马士兵linux视频资料

**1. vi三种工作模式，分别是：输入模式(编辑模式)，命令模式(一般模式)，末行模式(指令列命令模式)**

模式切换：
- 进去**默认为命令模式**，输入i，a，o，I,A,O 可进入输入模式
- 输入模式下 Esc 进入命令模式
- 命令模式下输入 : （冒号）进入末行模式
- 末行模式按两次ESC命令模式

**2. 编辑模式进入输入模式详解：（参考马士兵linux视频资料）**
|按键|模式转换|
| :------:| :------: |
| i |在当前光标所在字符的前面，转为输入模式|
| a|在当前光标所在字符的后面，转为输入模式|
| o|在当前光标所在行的下方，新建一行，并转为输入模式|
|  I |在当前光标所在行的行首，转为输入模式|
|  A|在当前光标所在行的行尾，转为输入模式|
|  O|在当前光标所在行的上方，新建一行，并转为输入模式|

**3. 光标的移动：（命令模式）**

3.1 逐字符移动
| 按键 | 移动方向 |
| :------:| :------: |
|h 或 向左箭头键(←) |左|
|l或 向右箭头键(→)|右|
|j 或 向下箭头键(↓)|下|
|k 或 向上箭头键(↑) |上|
|  数字加以上字母|可以往相应方向移动n个字符，如：10h，往左移动10个字符。|
|#<space>|# 表示数字，按下数字后再按空格键，光标会向右移动这一行的#个字符。如 10<space> 则光标会向后移动 10 个字符。|
3.2 以单词为单位移动：
| 按键 | 移动方向 |
| :------:| :------: |
 | w|移至下一个单词词首（往后）；|
 | e|移至下一个单词词尾（往后）；|
 | b|往前跳至当前或上一个单词的词首。（往前）|
 | 同样，可以在字母前加数字，如：10w||
3.3 行内跳转：
| 按键 | 移动方向 |
| :------:| :------: |
|0或功能键[Home]|跳至绝对行首（zero）|
| $或功能键[End]|跳至绝对行尾|
|  ^|行首第一个非空白字符|
3.4 行间跳转
| 按键 | 移动方向 |
| :------:| :------: |
|n<Enter>	|n 为数字。光标向下移动 n 行(常用)|
|#G|跳至第#行|
|G|最后一行|
|gg|第一行 末行模式下，直接给出行号即可|
|+|光标移动到非空格符的下一列|
|-|光标移动到非空格符的上一列|
|H|光标移动到这个屏幕的最上方那一行的第一个字符|
|M|光标移动到这个屏幕的中央那一行的第一个字符|
|L|光标移动到这个屏幕的最下方那一行的第一个字符|
3.5 跳动页面
| 按键 | 移动方向 |
| :------:| :------: |
|[Ctrl] + [f]|屏幕『向下』移动一页，相当于 [Page Down]按键 (常用)|
|[Ctrl] + [b]|屏幕『向上』移动一页，相当于 [Page Up] 按键 (常用)|
|[Ctrl] + [d]|屏幕『向下』移动半页|
|[Ctrl] + [u]|屏幕『向上』移动半页|

4. **关闭文件：**

| 按键 | 操作 |
| :------:| :------: |
|  :q |退出|
  |:wq| 保存并退出|
  |:q! |不保存强制退出|
  |:w |保存|
 | :w! |强行保存。若文件属性为『只读』时，强制写入该档案。能不能写入， 与权限有关|
 | :wq|:x|
|   ZZ |保存退出|
|:w [filename]|将编辑的数据储存成另一个档案（类似另存新档）|
|:r [filename]	|在编辑的数据中，读入另一个档案的数据。亦即将 『filename』 这个档案内容加到游标所在行后面|
|:n1,n2 w [filename]|	将 n1 到 n2 的内容储存成 filename 这个档案
|:! command|暂时离开 vi 到指令列模式下执行 command 的显示结果！例如『:! ls /home』即可在 vi 当中察看 /home 底下以 ls 输出的档案信息！|

5. **删除命令，转载自鸟哥网站 [http://cn.linux.vbird.org/linux_basic/0310vi_2.php](http://cn.linux.vbird.org/linux_basic/0310vi_2.php)**

| 按键 | 操作  |
| :------:| :------: |
|   x,X| 在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， X 为向前删除一个字符(相当于 [backspace] 亦即是退格键) (常用)|
|#x| 删除光标所在处及往后的#个字符|
|dd	|删除游标所在的那一整列(常用)|
|ndd|	n 为数字。删除光标所在的向下 n 列，例如 20dd 则是删除 20 列 (常用)|
|d1G|	删除光标所在到第一行的所有数据|
|dG	|删除光标所在到最后一行的所有数据|
|d$|	删除游标所在处，到该行的最后一个字符|
|d0	|那个是数字的 0 ，删除游标所在处，到该行的最前面一个字符|
6. **复制粘贴,转载自鸟哥网站 [http://cn.linux.vbird.org/linux_basic/0310vi_2.php](http://cn.linux.vbird.org/linux_basic/0310vi_2.php)**

| 按键 | 操作  |
| :------:| :------: |
|```yy```|	复制游标所在的那一行(常用)|
|```nyy```|	n 为数字。复制光标所在的向下 n 列，例如 ```20yy``` 则是复制 20 列(常用)|
|```y1G```|复制游标所在列到第一列的所有数据|
|```yG```|复制游标所在列到最后一列的所有数据|
|```y0```|复制光标所在的那个字符到该行行首的所有数据|
|```y$```|复制光标所在的那个字符到该行行尾的所有数据|
|```p, P```	|p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行！ 举例来说，我目前光标在第 20 行，且已经复制了 10 行数据。则按下 p 后， 那 10 行数据会贴在原本的 20 行之后，亦即由 21 行开始贴。但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行。 (常用)|
|```J```|将光标所在列与下一列的数据结合成同一列|
|```c```|重复删除多个数据，例如向下删除 10 行，```10cj```|
|```.```|不要怀疑！这就是小数点！意思是重复前一个动作的意思。 如果你想要重复删除、重复贴上等等动作，按下小数点```.```就好了！ (常用)|

7. **撤销编辑操作u**
```u``` 撤销前一次的编辑，连续按u，连续撤销
```#u``` 撤销最近#次操作
```Ctrl+r``` 取消最近一次的撤销 

8. **查找替换**

8.1 **查找**

| 按键 | 操作 |
| :------:| :------: |
       |```/aaa```| 可以找到关键字aaa，输入n找到下一个，输入N找到前一个（类似man里面）|
|```?word```|向光标之上寻找一个字符串名称为 word 的字符串。|

  8.2 **替换**
命令说明：复杂命令，**先进入末行模式，然后输入替换的命令**，比如，要讲代码里面所有原本是void的返回值改为String
```:1,\$s/void/String/g```
命令解读，**1是指第一行开始，$指的是到文件末尾，s指的是substitute**，查找替换，**/为分隔符，也可以使用#或者+作为分隔符**，此时中间出现的/不会做为分隔符，@也可，查找void，替换为String，**g指的是global，全局替换**，最后可以**加i指的是忽略大小写，不忽略可以不加** ，此处不应该加。
     或者
     ```:%s/void/String/g``` 这样也可以，**%指的是任意字符，也就是全文意思了**

| 按键 | 操作 |
| :------:| :------: |
|```:n1,n2s/word1/word2/g```|n1 与 n2 为数字。在第 n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为 word2 ！举例来说，在 100 到 200 行之间搜寻 vbird 并取代为 VBIRD 则：```:100,200s/vbird/VBIRD/g```。(常用)|
|```:1,$s/word1/word2/g```|	从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！(常用)|
|```:1,$s/word1/word2/gc```|	从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！且在取代前显示提示字符给用户确认 (confirm) 是否需要取代！(常用)|

9.  **显示行号**
       ```:set number``` 或者 ```:set nu```
10. 区块选择(Visual Block)

| 按键 | 操作 |
| :------:| :------: |
|v	|字符选择，会将光标经过的地方反白选择！|
|V	|行选择，会将光标经过的行反白选择！|
|[Ctrl]+v	|区块选择，可以用长方形的方式选择资料|
|y	|将反白的地方复制起来|
|d	|将反白的地方删除掉|

11. 多窗口功能

| 按键 | 操作 |
| :------:| :------: |
|:sp [filename]|	开启一个新窗口，如果有加 filename， 表示在新窗口开启一个新档案，否则表示两个窗口为同一个档案内容(同步显示)。|
|[ctrl]+w+ j [ctrl]+w+↓|	按键的按法是：先按下 [ctrl] 不放， 再按下 w 后放开所有的按键，然后再按下 j (或向下箭头键)，则光标可移动到下方的窗口。|
|[ctrl]+w+ k [ctrl]+w+↑|	同上，不过光标移动到上面的窗口。|
|[ctrl]+w+ q|	其实就是 :q 结束离开啦！ 举例来说，如果我想要结束下方的窗口，那么利用 [ctrl]+w+↓ 移动到下方窗口后，按下 :q 即可离开， 也可以按下 [ctrl]+w+q 啊！|
